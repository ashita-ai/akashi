# Akashi cloud deployment — docker/docker-compose.cloud.yml
#
# Copy this file:
#   cp docker/env.cloud.example docker/.env.cloud
#
# Then fill in your cloud credentials and run:
#   docker compose -f docker/docker-compose.cloud.yml --env-file docker/.env.cloud up -d

# ──────────────────────────────────────────────────────────────
# REQUIRED: TimescaleDB Cloud
# ──────────────────────────────────────────────────────────────

# Full connection string to TimescaleDB Cloud. Must include sslmode=require.
# Used directly by akashi for NOTIFY_URL (LISTEN/NOTIFY over a direct connection).
# Example: postgres://tsdbadmin:password@host.tsdb.cloud.timescale.com:39116/tsdb?sslmode=require
TIMESCALE_URL=

# Broken-out credentials for PgBouncer (it can't parse URL query parameters).
# These must match what's in TIMESCALE_URL.
TIMESCALE_HOST=
TIMESCALE_PORT=39116
TIMESCALE_USER=tsdbadmin
TIMESCALE_PASSWORD=
TIMESCALE_DB=tsdb

# ──────────────────────────────────────────────────────────────
# REQUIRED: Admin API key
# ──────────────────────────────────────────────────────────────

# Bootstrap API key for the initial admin agent. Change this.
AKASHI_ADMIN_API_KEY=changeme

# ──────────────────────────────────────────────────────────────
# Qdrant Cloud (recommended for vector search)
# ──────────────────────────────────────────────────────────────

# gRPC-compatible URL, e.g. https://xyz-abc.cloud.qdrant.io:6334
QDRANT_URL=
QDRANT_API_KEY=
# QDRANT_COLLECTION=akashi_decisions

# ──────────────────────────────────────────────────────────────
# Embedding provider
# ──────────────────────────────────────────────────────────────

# "auto" (default) tries OpenAI if key present, then Ollama, else noop.
# "openai" — requires OPENAI_API_KEY.
# "ollama" — requires OLLAMA_URL reachable from the container.
# "noop"   — disables embeddings entirely.
# AKASHI_EMBEDDING_PROVIDER=auto

OPENAI_API_KEY=
# AKASHI_EMBEDDING_MODEL=text-embedding-3-small
# AKASHI_EMBEDDING_DIMENSIONS=1024

# If using Ollama on the host instead of OpenAI:
# OLLAMA_URL=http://host.docker.internal:11434
# OLLAMA_MODEL=mxbai-embed-large

# ──────────────────────────────────────────────────────────────
# Redis
# ──────────────────────────────────────────────────────────────

# REDIS_PASSWORD=akashi

# ──────────────────────────────────────────────────────────────
# Stripe billing (optional)
# ──────────────────────────────────────────────────────────────

# STRIPE_SECRET_KEY=
# STRIPE_WEBHOOK_SECRET=
# STRIPE_PRO_PRICE_ID=

# ──────────────────────────────────────────────────────────────
# SMTP for email verification (optional)
# ──────────────────────────────────────────────────────────────

# AKASHI_SMTP_HOST=
# AKASHI_SMTP_PORT=587
# AKASHI_SMTP_USER=
# AKASHI_SMTP_PASSWORD=
# AKASHI_SMTP_FROM=noreply@akashi.dev
# AKASHI_BASE_URL=https://akashi.example.com

# ──────────────────────────────────────────────────────────────
# Observability (optional)
# ──────────────────────────────────────────────────────────────

# OTEL_EXPORTER_OTLP_ENDPOINT=
# OTEL_SERVICE_NAME=akashi

# ──────────────────────────────────────────────────────────────
# Logging
# ──────────────────────────────────────────────────────────────

# AKASHI_LOG_LEVEL=info
